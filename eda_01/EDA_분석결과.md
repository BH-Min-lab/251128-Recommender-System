# 추천 시스템 경진대회 EDA 분석 결과

## 1. 데이터 개요

| 항목 | 값 |
|------|-----|
| 총 상호작용 수 | 8,350,311건 |
| 유니크 유저 수 | 638,257명 |
| 유니크 아이템 수 | 29,502개 |
| 유니크 세션 수 | 2,889,552개 |
| 데이터 기간 | 2019-11-01 ~ 2020-02-29 (120일) |
| 데이터 희소성 | 99.96% |

---

## 2. 핵심 발견 (Critical Findings)

### 2.1 극심한 데이터 불균형 - 구매 데이터 부족

```
view (조회):     8,331,873건 (99.78%)
cart (장바구니):    16,362건 (0.20%)
purchase (구매):     2,076건 (0.02%)  ← 전체의 0.02%
```

| 지표 | 값 |
|------|-----|
| 전체 유저 | 638,257명 |
| **구매한 유저** | **1,681명 (0.26%)** |
| 구매 안한 유저 | 636,576명 (99.74%) |

**문제점:** 경진대회 평가가 **실제 구매 예측(NDCG@10)**인데, 구매 데이터가 **0.02%**밖에 없음.

### 2.2 Cold Start 문제 - 42%의 유저가 필터링됨

```
5회 미만 상호작용 유저: 268,279명 (42.03%)
→ SASRec 학습 시 이 유저들이 제외됨
→ 추론 시 인기 아이템만 추천받음
```

**이것이 ALS와 SASRec 점수가 같은 이유:**
- 42%의 유저가 동일한 인기 아이템 Top 10을 받음
- 두 모델 모두 같은 fallback 전략 사용

### 2.3 카테고리 정보 무의미

```
메인 카테고리: 1개 (apparel만 존재)
서브 카테고리: 24개
```

모든 데이터가 **의류(apparel)** 카테고리이므로 카테고리 정보는 차별화에 도움 안됨.

---

## 3. 유저 행동 분석

### 3.1 유저별 상호작용 분포

| 상호작용 횟수 | 유저 수 |
|--------------|---------|
| 1회 | 107,422명 |
| 2-5회 | 195,481명 |
| 6-10회 | 116,162명 |
| 11-50회 | 193,295명 |
| 50회 이상 | 25,897명 |

- 평균: 13.08회
- 중앙값: 6회
- 최대: 37,207회

### 3.2 전환율 분석

| 전환 경로 | 전환율 |
|----------|--------|
| view → cart | 0.20% |
| cart → purchase | 12.69% |
| view → purchase | 0.02% |

**인사이트:** 장바구니에 담으면 12.69% 확률로 구매 → **cart 이벤트가 강력한 구매 신호**

---

## 4. 아이템 분석

### 4.1 Long-tail 분포

```
상위 10% 아이템이 전체 상호작용의 63.4%를 차지
→ 소수 인기 아이템에 집중된 전형적인 Long-tail 분포
```

### 4.2 아이템별 상호작용 통계

| 지표 | 값 |
|------|-----|
| 최소 | 1회 |
| 최대 | 143,759회 |
| 평균 | 283회 |
| 중앙값 | 77회 |

### 4.3 구매된 아이템

- 전체 아이템: 29,502개
- 구매된 아이템: 996개 (3.38%)
- **구매 안된 아이템: 28,506개 (96.62%)**

---

## 5. 브랜드 분석

### 5.1 조회 인기 브랜드 vs 구매 인기 브랜드

| 순위 | 조회 Top | 조회 수 | 구매 Top | 구매 수 |
|------|----------|---------|----------|---------|
| 1 | respect | 723,404 | **xiaomi** | 224 |
| 2 | sony | 425,834 | sony | 180 |
| 3 | xiaomi | 241,872 | samsung | 112 |
| 4 | baden | 224,849 | iqos | 101 |
| 5 | samsung | 217,397 | respect | 74 |
| 6 | rieker | 184,334 | apple | 51 |
| 7 | luminarc | 171,959 | defacto | 50 |
| 8 | apple | 140,224 | luminarc | 43 |
| 9 | defacto | 137,947 | glo | 43 |
| 10 | nika | 126,107 | lg | 40 |

**인사이트:**
- `respect`는 조회 1위지만 구매는 5위 → 구경만 많이 함
- `xiaomi`, `sony`, `samsung`이 실제 구매로 이어지는 브랜드
- `iqos`, `glo` (전자담배)가 구매 상위에 있음

---

## 6. 가격 분석

### 6.1 가격 통계

| 지표 | 값 |
|------|-----|
| 최소 | $0.77 |
| 최대 | $2,574.07 |
| 평균 | $150.92 |
| 중앙값 | $79.02 |

### 6.2 이벤트 타입별 평균 가격

| 이벤트 | 평균 가격 | 중앙값 |
|--------|----------|--------|
| view | $150.93 | $79.02 |
| cart | $149.42 | $65.64 |
| purchase | **$122.29** | **$64.24** |

**인사이트:** 구매된 상품의 가격이 더 낮음 → **저가 상품이 구매 전환율 높음**

### 6.3 가격대별 구매 전환율

| 가격대 | 조회 수 | 구매 수 | 전환율 |
|--------|---------|---------|--------|
| $0-50 | 2,448,129 | 870 | **0.036%** |
| $50-100 | 2,782,104 | 528 | 0.019% |
| $100-200 | 1,522,707 | 303 | 0.020% |
| $200-500 | 1,095,597 | 326 | 0.030% |
| $500-1000 | 356,046 | 41 | 0.012% |
| $1000+ | 127,290 | 8 | 0.006% |

**인사이트:** $0-50 가격대가 구매 전환율 가장 높음

---

## 7. 시간 분석

### 7.1 시간대별 패턴

- **피크 시간**: 14~17시 (오후)
- **저조 시간**: 0~3시 (새벽)

### 7.2 요일별 패턴

| 요일 | 상호작용 수 | 구매 전환율 |
|------|------------|------------|
| Mon | 1,182,197 | 0.006% |
| Tue | 1,141,453 | 0.005% |
| Wed | 1,119,560 | 0.007% |
| Thu | 1,103,642 | **0.072%** |
| Fri | 1,210,477 | 0.042% |
| Sat | 1,277,313 | 0.035% |
| Sun | 1,315,669 | 0.010% |

**인사이트:**
- 주말(토, 일) 상호작용이 더 많음
- **목요일(Thu)** 구매 전환율이 특이하게 높음 (0.072%)

---

## 8. 세션 분석

| 지표 | 값 |
|------|-----|
| 총 세션 수 | 2,889,552개 |
| 평균 세션 길이 | 2.89개 아이템 |
| 중앙값 세션 길이 | 1개 아이템 |
| 최대 세션 길이 | 1,674개 아이템 |
| 구매 있는 세션 | 1,980개 (0.07%) |
| 세션당 평균 유니크 아이템 | 2.59개 |

---

## 9. 모델 개선 방향

### 9.1 우선순위 높음 (High Priority)

#### 1) 이벤트 가중치 적용

현재 베이스라인:
```python
train_df["label"] = 1  # view = cart = purchase 동일 취급
```

개선안:
```python
event_weights = {'view': 1, 'cart': 3, 'purchase': 5}
train_df["label"] = train_df['event_type'].map(event_weights)
```

**근거:** cart→purchase 전환율이 12.69%로 높음 → cart는 강력한 구매 신호

#### 2) Cold Start 유저 처리 개선

현재: 모든 cold user에게 동일한 인기 아이템 Top 10 추천

개선안:
- 최근 인기 아이템 (시간 가중치 적용)
- 저가 상품 우선 (구매 전환율 높음)
- 구매 인기 브랜드(xiaomi, sony, samsung) 아이템 우선

#### 3) SASRec 필터링 완화

현재:
```yaml
user_inter_num_interval: "[5,Inf)"  # 42% 유저 제외
```

개선안:
```yaml
user_inter_num_interval: "[2,Inf)"  # 또는 "[1,Inf)"
```

### 9.2 우선순위 중간 (Medium Priority)

#### 4) 브랜드 정보 활용

구매 전환율 높은 브랜드 아이템에 가중치:
- xiaomi, sony, samsung, iqos, apple

#### 5) 가격 정보 활용

- 저가($0-50) 상품에 가중치
- 유저별 가격 선호도 반영

#### 6) 시간 정보 활용

- 최근 상호작용에 더 높은 가중치
- 목요일 구매 패턴 분석

### 9.3 우선순위 낮음 (Low Priority)

#### 7) 카테고리 정보

- 메인 카테고리가 1개(apparel)뿐이므로 활용 가치 낮음
- 서브 카테고리(24개)는 활용 가능할 수 있음

---

## 10. 문제점 요약

| 문제 | 심각도 | 영향 | 개선 방향 |
|------|--------|------|----------|
| 구매 데이터 부족 (0.02%) | 🔴 심각 | 학습 신호 부족 | 이벤트 가중치 |
| Cold Start (42%) | 🔴 심각 | 점수 동일 원인 | 필터링 완화 |
| Long-tail (63%) | 🟡 중간 | 다양성 부족 | 인기도 조절 |
| 희소성 (99.96%) | 🟡 중간 | 협업필터링 한계 | 하이브리드 모델 |
| 카테고리 무의미 | 🟢 낮음 | 특징 손실 | 무시 가능 |

---

## 11. 다음 실험 계획

1. **[실험 1]** ALS에 이벤트 가중치 적용 (view:1, cart:3, purchase:5)
2. **[실험 2]** SASRec 필터링 조건 완화 (5회 → 2회)
3. **[실험 3]** Cold Start 유저에게 구매 인기 아이템 추천
4. **[실험 4]** 하이퍼파라미터 튜닝 (hidden_size, n_layers 증가)
5. **[실험 5]** 앙상블 (ALS + SASRec 결합)
